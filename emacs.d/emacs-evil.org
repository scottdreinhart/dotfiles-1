#+TITLE:Emacs Evil Config
#+AUTHOR: Peng Li
#+EMAIL: seudut@gmail.com

As the =Evil= mode is significant, and has lots of configurations, it's better put them 
in a separate file.

* Evil mode 
https://www.emacswiki.org/emacs/Evil

#+BEGIN_SRC emacs-lisp :tangle yes :results silent
  (defun my-evil-config ()
    "This should be called after evil-mode is loaded."
    ;;   Buffer operations
    (define-key evil-normal-state-map ";w" 'evil-save)
    (define-key evil-normal-state-map ";e" 'evil-edit)
    ;;
    ;;  Window operations
    (define-key evil-normal-state-map "\C-W s" 'evil-window-split)
    (define-key evil-normal-state-map "\C-W v" 'evil-window-vsplit)
    (define-key evil-normal-state-map ";s" 'evil-window-split)
    (define-key evil-normal-state-map ";v" 'evil-window-vsplit)
    (define-key evil-normal-state-map ";q" 'evil-window-delete)
    (define-key evil-normal-state-map "\C-W o" 'delete-other-windows)
    (define-key evil-normal-state-map "\C-W h" 'evil-window-left)
    (define-key evil-normal-state-map "\C-W j" 'evil-window-down)
    (define-key evil-normal-state-map "\C-W k" 'evil-window-up)
    (define-key evil-normal-state-map "\C-W l" 'evil-window-right)
    (define-key evil-normal-state-map "\C-h" 'evil-window-left)
    (define-key evil-normal-state-map "\C-j" 'evil-window-down)
    (define-key evil-normal-state-map "\C-k" 'evil-window-up)
    (define-key evil-normal-state-map "\C-l" 'evil-window-right))

  (use-package evil
    :ensure t
    :init
    (setq evil-default-state 'emacs)
    (setq evil-emacs-state-cursor '("red" box))
    (setq evil-normal-state-cursor '("green" box))
    (setq evil-visual-state-cursor '("orange" box))
    (setq evil-insert-state-cursor '("red" bar))
    (setq evil-replace-state-cursor '("red" bar))
    (setq evil-operator-state-cursor '("red" hollow))
    :config
    (evil-mode t)
    ;; (defalias 'evil-insert-state 'evil-emacs-state)
    ;; switch to normal mode
    ;; (key-chord-define evil-insert-state-map "jj" 'evil-normal-state)
    ;; (key-chord-define evil-emacs-state-map "jj" 'evil-normal-state)
    ;;
    ;; Normal state map
    (my-evil-config))


#+END_SRC

* Evil-escape
[[https://github.com/syl20bnr/evil-escape][evil-escape]], escape from anything with customizable key sequence.
#+BEGIN_SRC emacs-lisp :tangle yes :results silent
  (use-package evil-escape
    :ensure t
    :init
    (setq-default evil-escape-delay 0.2)
    (setq-default evil-escape-key-sequence "jj")
    (setq-default evil-escape-excluded-states '(emacs))
    :config
    (evil-escape-mode))
#+END_SRC

* Provide 
#+BEGIN_SRC emacs-lisp :tangle yes :results silent
  (provide 'init-evil-mode)
#+END_SRC
